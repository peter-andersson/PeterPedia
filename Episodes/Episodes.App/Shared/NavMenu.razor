<nav class="bg-black w-full p-2">
    <div class="flex flex-wrap items-center mx-auto justify-between md:justify-start">
        <a href="/" class="inline-flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tv" viewBox="0 0 16 16">
                <path d="M2.5 13.5A.5.5 0 0 1 3 13h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zM13.991 3l.024.001a1.46 1.46 0 0 1 .538.143.757.757 0 0 1 .302.254c.067.1.145.277.145.602v5.991l-.001.024a1.464 1.464 0 0 1-.143.538.758.758 0 0 1-.254.302c-.1.067-.277.145-.602.145H2.009l-.024-.001a1.464 1.464 0 0 1-.538-.143.758.758 0 0 1-.302-.254C1.078 10.502 1 10.325 1 10V4.009l.001-.024a1.46 1.46 0 0 1 .143-.538.758.758 0 0 1 .254-.302C1.498 3.078 1.675 3 2 3h11.991zM14 2H2C0 2 0 4 0 4v6c0 2 2 2 2 2h12c2 0 2-2 2-2V4c0-2-2-2-2-2z" />
            </svg>
            <span class="self-center text-xl font-semibold whitespace-nowrap ml-1">Episodes</span>
        </a>
        <button type="button" class="inline-flex items-center p-2 ml-3 text-sm md:hidden" @onclick="ToggleNavMenu">
            <span class="sr-only">Open main menu</span>
            @if (collapseNavMenu)
            {
                <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
            }
            else
            {
                <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" /></svg>
            }
        </button>

        <div class="w-full md:block md:w-auto md:ml-4 @NavMenuCssClass">
            <ul class="flex flex-col md:flex-row mt-4 md:mt-0" @onclick="ToggleNavMenu">
                <AuthorizeView Roles="admin">
                    <Authorized>
                        <li>
                            <NavLink class="block md:ml-1 pr-4 pl-3 hover:underline" href="/" Match="NavLinkMatch.All">Unwatched</NavLink>
                        </li>
                        <li>
                            <NavLink class="block md:ml-1 pr-4 pl-3 hover:underline" href="/add" Match="NavLinkMatch.All">Add tv show</NavLink>
                        </li>
                        <li>
                            <NavLink class="block md:ml-1 pr-4 pl-3 hover:underline" href="/search" Match="NavLinkMatch.Prefix">Search</NavLink>
                        </li>
                        <li>
                            <a class="block pr-4 pl-3 hover:underline" href="/.auth/logout">Log out</a>
                        </li>
                    </Authorized>
                    <NotAuthorized>
                        <li>
                            <a class="block pr-4 pl-3 hover:underline" href="/.auth/logout">Log out</a>
                        </li>
                    </NotAuthorized>
                </AuthorizeView>
            </ul>
        </div>
    </div>
</nav>

@code {
    private bool collapseNavMenu = true;

    private string? NavMenuCssClass => collapseNavMenu ? "hidden" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}
