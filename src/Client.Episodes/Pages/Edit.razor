@page "/edit/{id:int}"

<h2>Edit show</h2>

<EditForm class="row align-items-center" Model="@Show" OnSubmit="@Save">
    <div class="mb-3">
        <label class="control-label">Title</label>
        <InputText class="form-control" type="text" @bind-Value="@Show.Title"></InputText>
    </div>
    <div class="mb-3">
        <label class="control-label">Status: @Show.Status</label>
    </div>
    <div class="mb-3">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" @bind="@Show.ForceRefresh" id="forceRefresh">
            <label class="form-check-label" for="forceRefresh">
                Force refresh
            </label>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-auto">
            <button type="button" class="btn btn-secondary" @onclick="Cancel">Cancel</button>
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-success" disabled=@IsTaskRunning>Save</button>
        </div>
    </div>
</EditForm>
<hr />
<div class="row mb-3">
    <a class="col-sm-2 text-info" href="@Show.TheMovieDbUrl.ToString()" target="_blank">View on TMDb</a>
</div>
<hr />
@foreach (var season in Show.Seasons.OrderBy(s => s.SeasonNumber))
{
    if (season.Episodes.Count > 0)
    {
        <SeasonView Show="@Show" Season="@season" DisplayAllEpisodes="true"></SeasonView>
    }
}